## ğŸ¯ èƒŒæ™¯
ä¸€ä¸ªå¿«é€Ÿæ„å»ºå¯¹è¯åŠ©æ‰‹çš„å‰ç«¯ç»„ä»¶åº“ï¼Œä½†å®ƒæ›´åƒæ˜¯ä¸€ä¸ªè½»é‡çš„è§£å†³æ–¹æ¡ˆ

## å±•ç¤º
## âœ¨ ç‰¹æ€§
ğŸ§© **å•å®¹å™¨å³ç”¨**ï¼šæ— éœ€åµŒå¥—å¤šå±‚ç»„ä»¶ï¼Œä¸€ä¸ªå®¹å™¨è¦†ç›–å…¨éƒ¨åœºæ™¯ï¼Œæ¥å…¥æˆæœ¬é™ä½ 80%  
âš™ï¸ **é…ç½®é©±åŠ¨**ï¼šæ‰€æœ‰äº¤äº’ã€æ ·å¼ã€æ–‡æ¡ˆå‡é€šè¿‡ JSON é…ç½®å®Œæˆï¼Œæ”¯æŒçƒ­æ›´æ–°  
ğŸ“¡ **äº‹ä»¶ä¸°å¯Œ**ï¼šç»Ÿä¸€ emits è¾“å‡º/å±æ€§å‡½æ•°ï¼Œè½»æ¾å¯¹æ¥çŠ¶æ€ç®¡ç†æˆ–ä¸šåŠ¡é€»è¾‘  
ğŸŒ“ **æ’æ§½çµæ´»**ï¼šå…³é”®èŠ‚ç‚¹æä¾›åŒåæ’æ§½ï¼Œæ—¢ä¿ç•™è‡ªç”±åº¦åˆä¿æŒ API ç®€æ´  
ğŸ‰ **ä¸»é¢˜é…ç½®**ï¼šé«˜åº¦çµæ´»è‡ªç”±å®šåˆ¶çš„JSONåŒ–æ ·å¼é…ç½®, æ”¯æŒæŸ¯é‡ŒåŒ–æ ·å¼è°ƒæ•´  
ğŸ“¦ æ¯ä¸ªç»„ä»¶å¯å•ç‹¬å¼•å…¥ï¼ŒTree-Shaking é›¶ä¾èµ–  
ğŸ”§ å®Œå…¨ TypeScriptï¼Œæ™ºèƒ½æç¤ºå‹å¥½  
## ğŸ“– æ–‡æ¡£
å®Œæ•´æ–‡æ¡£ä¸å®æ—¶ Demo è¯·è®¿é—®ï¼šå»ºè®¾ä¸­...  
### ğŸ¨ é…ç½®æ¦‚è§ˆ

| propsåç§°            | æ˜¯å¦å¿…å¡« | è¯´æ˜                                           | è¯¦ç»†ä¿¡æ¯                                   |
| -------------------- | -------- | ---------------------------------------------- | ------------------------------------------ |
| mode                 | å¦       | ç”¨äºè®¾ç½®Chatç»„ä»¶å±•ç¤ºæ¨¡å¼ï¼ˆåŒ…æ‹¬PCã€H5ã€Bubbleï¼‰ | -         |
| conversations        | å¦       | ç”¨äºè®¾ç½®å†å²ä¼šè¯åˆ—è¡¨                           |-          |
| conversationId       | å¦       | ç”¨äºè®¾ç½®å½“å‰é€‰ä¸­çš„ä¼šè¯id                       | -  |
| messageList          | å¦       | ç”¨äºè®¾ç½®å½“å‰ä¼šè¯çš„å†å²æ¶ˆæ¯åˆ—è¡¨                 | -        |
| chatConfig           | å¦       | ç”¨äºè®¾ç½®Chatå†…éƒ¨å„ç»„ä»¶                         | -     |
| draggable            | å¦       | ç”¨äºè®¾ç½®Chatæ˜¯å¦å¼€å¯å¯æ‹–æ‹½                     | -         |
| draggableOptions     | å¦       | ç”¨äºè®¾ç½®Chatå¼€å¯å¯æ‹–æ‹½åçš„å…·ä½“é…ç½®å‚æ•°         | -   |
| bubbleOptions        | å¦       | ç”¨äºè®¾ç½®Chatè®¾ç½®modeä¸º`bubble`åï¼ŒæŒ‰é’®é…ç½®ä¿¡æ¯ | -    |
| onSendMsg            | æ˜¯       | å‘é€æ¶ˆæ¯æ—¶è°ƒç”¨                                 | -       |
| onStopMsg            | æ˜¯       | åœæ­¢æ¶ˆæ¯æ—¶è°ƒç”¨                                 | -        |
| onUploadFiles        | æ˜¯       | ä¸Šä¼ æ–‡ä»¶æ—¶è°ƒç”¨                                 |-    |
| onSwitchConversation | æ˜¯       | åˆ‡æ¢ä¼šè¯æ—¶è°ƒç”¨                                 |-|
| onAddConversation    | æ˜¯       | æ–°å»ºä¼šè¯æ—¶è°ƒç”¨                                 | -   |
| onDeleteConversation | æ˜¯       | åˆ é™¤ä¼šè¯æ—¶è°ƒç”¨                                 | - |
| onUpdateConversation | æ˜¯       | æ›´æ–°ä¼šè¯æ—¶è°ƒç”¨                                 |- |
| slots                | å¦       | è‡ªå®šä¹‰å±•ç¤ºä½é…ç½®                               |-|

## ğŸš€ å¿«é€Ÿå¼€å§‹
### @ms-chat/react Â· Quick Start
ä¸€è¡Œå‘½ä»¤å¯åŠ¨èŠå¤©ç»„ä»¶ï¼Œ3 åˆ†é’Ÿæ¥å…¥ä½ çš„ä¸šåŠ¡æ¥å£ã€‚  
1. å®‰è£…
```bash
npm i @ms-chat/react
```
2. æœ€å°å¯è¿è¡Œç¤ºä¾‹  
```TypeScript
    # é—®ç­”æ¢æˆã€Œä½ è‡ªå·±çš„æ¥å£ã€ pushMessageä¿æŒidç›¸åŒä¼šè§¦å‘æ¶ˆæ¯æ›´æ–°
    const _sendMsg = (msg: string, isActive: boolean) => {
      msChatRef.current.pushMessage({
        id: contentId,
        type: 'markdown',
        content: msg,
        role: 'system',
        isStream: true,
        isActive: !!isActive
      });
    };
    const sendMsgThrottle = throttle(_sendMsg, 30);
    const sse = new EventSourceService<{ message: string }>();
        sse.connect({
            url: 'ä½ çš„/stream/chat',          // â† æ¢æˆçœŸå®ç«¯ç‚¹
            headers: { 'x-token': 'xxx' },    // â† é‰´æƒ
            body: { query: msg, userId: 123 },
            method: 'POST'
        }, {
            onMessage: (ev) => {
                const chunk = ev.choices?.[0]?.delta?.content || '';
                resContent += chunk;
                sendMsgThrottle(resContent, true);
            },
            onClose: () => {
                sendMsgThrottle(resContent, false)
            }
        });
        interface MainProps {
            mode: 'h5' | 'pc' | 'bubble';
        }
        const Main: React.FC<MainProps> = ({ mode }) => {
          return (
                <MSChat
                  ref={msChatRef}
                  mode={mode}
                  onSendMsg={sendMsg}
                 />
          )
        };
```
4. å¸¸ç”¨äºŒæ¬¡å¼€å‘å…¥å£  

| éœ€æ±‚          | æ”¹å“ªé‡Œ                                                                          |
| ----------- | ---------------------------------------------------------------------------- |
| æ›¿æ¢å¤´åƒã€åç§°     | `chatConfig.bubble.left / right`                                             |
| éšè—ä¸Šä¼ æŒ‰é’®      | `chatConfig.sender.options.enableUpload = false`                             |
| è‡ªå®šä¹‰æ¬¢è¿è¯­      | `initWelcome()` é‡ŒæŠŠ `res.data` æ¢æˆä½ çš„é™æ€ JSON                                    |
| æ–°å¢ä¼šè¯ã€åˆ é™¤ã€é‡å‘½å | å·²å†…ç½® `onAddConversation / onDeleteConversation / onUpdateConversation`ï¼Œç›´æ¥è°ƒç”¨å³å¯ |
| æ’å…¥å¡ç‰‡/æŒ‰é’®     | `slots.bubbleCardExt = (props) => <YourCard {...props} />` |

Doneï¼ç°åœ¨ä½ å·²ç»æ‹¥æœ‰ï¼š  
âœ… ä¼šè¯åˆ—è¡¨  
âœ… æµå¼å¯¹è¯  
âœ… æ–‡ä»¶ä¸Šä¼   
âœ… å¤šç«¯æ¨¡å¼ï¼ˆPC / H5 / æ°”æ³¡ï¼‰  
å¿«å»æ”¹é€  sendMsg å’Œåç«¯æ¥èµ·æ¥ï¼Œå±äºä½ çš„ AIå¯¹è¯åº”ç”¨å°±readyäº†  
## ğŸ”¨ æœ¬åœ°å¼€å‘  
è¯·ç¡®ä¿å¼€å‘æ­¤é¡¹ç›®æ—¶ï¼Œæœ¬åœ°å®‰è£…äº†node16çš„è¿è¡Œç¯å¢ƒï¼Œå¹¶ä¸”å»ºè®®ä½¿ç”¨pnpm@8ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ã€‚  
æœ¬é¡¹ç›®æ•´ä½“ä½¿ç”¨monorepoæ¶æ„è¿›è¡Œå¼€å‘ï¼Œå­åŒ…åœ¨packagesç›®å½•ä¸‹ï¼š  
coreï¼šåŒ…å«å›¾è¡¨ç»„ä»¶ä¸­ä¸æ¡†æ¶ï¼ˆreactã€vueï¼‰æ— å…³çš„å…¬ç”¨å‡½æ•°ã€tsç±»å‹å®šä¹‰ç­‰   vue: åŒ…å«vueæ¡†æ¶ä½¿ç”¨çš„åŸºç¡€ç»„ä»¶   reactï¼šåŒ…å«reactæ¡†æ¶ä½¿ç”¨çš„åŸºç¡€ç»„ä»¶  
ç›®æ ‡æ˜¯reactã€vueå°½é‡ä¿æŒapiä¸€è‡´ï¼Œå¹¶ä¸”èƒ½å¤ç”¨çš„å†…å®¹å°½é‡æŠ½ç¦»åˆ°coreåŒ…ä¸­å¤ç”¨  
è¿›å…¥reactã€vue-nexté¡¹ç›®ä¸­ æŸ¥çœ‹demoæ–‡ä»¶å³å¯ã€‚  
![Alt text](image.png)

## ğŸ˜„ å¼€å‘ç¾¤
ä¼ä¸šå¾®ä¿¡ï¼šxxx